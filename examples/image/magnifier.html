<!DOCTYPE html>
<html>
    <body>
        <h1>Magnifier</h1>
        <p>Click(touch) on image and move up, down, left or right.</p>
    </body>
    <script src="../../dist/webgl-example.bundle.js"></script>
    <script>
        const MagnifierImageWindow = webglexample.window.MagnifierImageWindow;
        let element;
        let imageWindow;
        let image;
        let windowRatio = 1;
        window.addEventListener('load', function() {
            element = document.getElementById("gl_element");
            imageWindow = new MagnifierImageWindow(element);
            imageWindow.initialize(element.clientWidth, element.clientWidth * windowRatio);
            image = new Image();
            image.crossOrigin = "anonymous";
            image.src = 'https://gandis0713.github.io/img/share/effect.jpg';
            image.addEventListener('load', function() {
                windowRatio = image.height / image.width;
                imageWindow.setSize(element.clientWidth, element.clientWidth * windowRatio);
                imageWindow.setImage(image);
            });
        })
        window.addEventListener('resize', function() {
            if(!image) return;
            imageWindow.setSize(element.clientWidth, element.clientWidth * windowRatio);
        });
    </script>
    <body>
        <div id="gl_element" style="width: 100%"></div>
    </body>
</html>